//
//  Models.swift
//  Shona App
//
//  Created by Munashe T Chitima on 6/7/2025.
//

import Foundation
import SwiftData

@Model
final class User {
    var id: String
    var name: String
    var email: String
    var xp: Int
    var hearts: Int
    var level: Int
    var createdAt: Date
    
    init(id: String = UUID().uuidString, name: String, email: String, xp: Int = 0, hearts: Int = 5) {
        self.id = id
        self.name = name
        self.email = email
        self.xp = xp
        self.hearts = hearts
        self.level = max(1, xp / 100 + 1)
        self.createdAt = Date()
    }
}

@Model
final class Lesson {
    var id: String
    var title: String
    var lessonDescription: String
    var category: String
    var orderIndex: Int
    var difficulty: String
    var isCompleted: Bool
    var exercises: [Exercise]
    
    init(id: String = UUID().uuidString, title: String, description: String, category: String, orderIndex: Int, difficulty: String = "Easy") {
        self.id = id
        self.title = title
        self.lessonDescription = description
        self.category = category
        self.orderIndex = orderIndex
        self.difficulty = difficulty
        self.isCompleted = false
        self.exercises = []
    }
}

@Model
final class Exercise {
    var id: String
    var type: String
    var question: String
    var correctAnswer: String
    var options: [String]
    var shonaPhrase: String?
    var englishPhrase: String?
    var audioText: String?
    var points: Int
    var isCompleted: Bool
    
    init(id: String = UUID().uuidString, type: String, question: String, correctAnswer: String, options: [String] = [], points: Int = 10) {
        self.id = id
        self.type = type
        self.question = question
        self.correctAnswer = correctAnswer
        self.options = options
        self.points = points
        self.isCompleted = false
    }
}

@Model
final class Progress {
    var id: String
    var userId: String
    var lessonId: String
    var score: Int
    var completed: Bool
    var completedAt: Date?
    
    init(id: String = UUID().uuidString, userId: String, lessonId: String, score: Int = 0, completed: Bool = false) {
        self.id = id
        self.userId = userId
        self.lessonId = lessonId
        self.score = score
        self.completed = completed
        self.completedAt = completed ? Date() : nil
    }
} 